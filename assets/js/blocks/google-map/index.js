(()=>{var{__:t}=window.wp.i18n,{useBlockProps:Pe,InspectorControls:Ee,PanelColorSettings:je}=window.wp.blockEditor,{TextControl:le,TextareaControl:ue,RangeControl:fe,SelectControl:Q,Button:E,Placeholder:Re,Spinner:Le,ToggleControl:B,BaseControl:Ve,__experimentalToggleGroupControl:Qe,__experimentalToggleGroupControlOption:Xe}=window.wp.components,{useState:H,useEffect:j,useRef:ae}=window.wp.element,{useBlockId:Je,getDimensionCSS:ke,animations:Z,animationPreview:Te}=digi.utils,{tabIcons:se}=digi.icons,{ResponsiveControl:re,DimensionControl:he,CustomTabPanel:Ze,BoxShadowControl:We,TabPanelBody:v}=digi.components,Fe=({attributes:R,setAttributes:a,clientId:W})=>{let{id:m,anchor:A,visibility:f,customClasses:F,mapHeight:g,zoom:O,mapType:$,mapStyle:n,customMapStyle:u,markers:i,address:G,animation:y,enableZoom:w,enableScroll:C,enableFullscreenControl:M,enableStreetViewControl:_,enableMapTypeControl:S,borderStyle:b,borderWidth:D,borderRadius:I,borderColor:ie,boxShadow:h,boxShadowHover:x}=R;Je(m,W,a);let[k,we]=H(window.digi.responsiveState.activeDevice),[Ce,ne]=H(!1),[ce,ee]=H(null),[z,te]=H(!1),[r,pe]=H(null),[K,oe]=H([]),L=ae(null),T=ae(null),[de,Me]=H(()=>{if(window.digi.uiState){let e=window.digi.uiState.getActiveTab(W);if(e)return e}return"options"});j(()=>window.digi.responsiveState.subscribe(l=>{we(l)}),[]),j(()=>{i||a({markers:[]})},[a]),j(()=>{if(!z&&typeof google>"u"&&!window.googleMapsLoading){if(!digiBlocksData.googleMapsApiKey){ee(t("Google Maps API key not found. Please add it in the DigiBlocks settings.","digiblocks"));return}window.googleMapsLoading=!0,window.digiblocksGoogleMapsCallbacks=window.digiblocksGoogleMapsCallbacks||[];let e=()=>{te(!0),T.current=new google.maps.Geocoder};window.digiblocksGoogleMapsCallbacks.push(e),typeof window.digiblocksGoogleMapsCallback!="function"&&(window.digiblocksGoogleMapsCallback=()=>{window.googleMapsInitialized=!0,window.googleMapsLoading=!1,window.digiblocksGoogleMapsCallbacks.forEach(o=>{typeof o=="function"&&o()})});let l=document.createElement("script");return l.src=`https://maps.googleapis.com/maps/api/js?key=${digiBlocksData.googleMapsApiKey}&callback=digiblocksGoogleMapsCallback&loading=async`,l.async=!0,l.defer=!0,document.head.appendChild(l),()=>{let o=window.digiblocksGoogleMapsCallbacks.indexOf(e);o>-1&&window.digiblocksGoogleMapsCallbacks.splice(o,1)}}else if(!z&&typeof google<"u")te(!0),T.current=new google.maps.Geocoder;else if(!z&&window.googleMapsLoading){let e=()=>{te(!0),T.current=new google.maps.Geocoder};return window.digiblocksGoogleMapsCallbacks=window.digiblocksGoogleMapsCallbacks||[],window.digiblocksGoogleMapsCallbacks.push(e),()=>{let l=window.digiblocksGoogleMapsCallbacks.indexOf(e);l>-1&&window.digiblocksGoogleMapsCallbacks.splice(l,1)}}},[z]),j(()=>{if(z&&L.current&&!r){let l={center:{lat:40.7128,lng:-74.006},zoom:O||10,mapTypeId:$||"roadmap",zoomControl:w,scrollwheel:C,fullscreenControl:M,streetViewControl:_,mapTypeControl:S},o=i&&i.length>0;if(o&&digiBlocksData.googleMapsMapId)l.mapId=digiBlocksData.googleMapsMapId;else if(n&&n!=="default")if(n==="custom"&&u)try{let c=JSON.parse(u);l.styles=c}catch(c){console.error("Invalid map style JSON:",c)}else N[n]&&(l.styles=N[n]);let s=new google.maps.Map(L.current,l);pe(s),T.current||(T.current=new google.maps.Geocoder),G&&Y(G,s),o&&V(i,s)}},[z,L,r,O,$,n,u,G,i,w,C,M,_,S]),j(()=>{if(r){if(r.setZoom(O),r.setMapTypeId($),n&&n!=="default")if(n==="custom"&&u)try{let e=JSON.parse(u);r.setOptions({styles:e})}catch(e){console.error("Invalid map style JSON:",e)}else N[n]&&r.setOptions({styles:N[n]});else r.setOptions({styles:[]});r.setOptions({zoomControl:w,scrollwheel:C,fullscreenControl:M,streetViewControl:_,mapTypeControl:S})}},[r,O,$,n,u,w,C,M,_,S]);let Y=(e,l,o=-1)=>{T.current&&(ne(!0),ee(null),T.current.geocode({address:e},(s,c)=>{if(ne(!1),c==="OK"&&s&&s.length>0){let p=s[0].geometry.location;if(o>=0){let d=[...i];d[o]={...d[o],latitude:p.lat(),longitude:p.lng()},a({markers:d}),r&&V(d,r)}else if(l.setCenter(p),i&&i.length>0){let d=[...i];d[0]={...d[0],address:e,latitude:p.lat(),longitude:p.lng()},a({markers:d}),r&&V(d,r)}}else ee(t("Could not find address. Please try a different one or use the map to position your marker.","digiblocks"))}))},ye=()=>{let e=[...i||[]],l=`marker-${Date.now()}`,o=r?r.getCenter():{lat:40.7128,lng:-74.006};if(e.push({id:l,address:"",latitude:typeof o.lat=="function"?o.lat():o.lat,longitude:typeof o.lng=="function"?o.lng():o.lng,title:""}),a({markers:e}),e.length===1&&r&&digiBlocksData.googleMapsMapId){let s=r.getCenter(),c=r.getZoom(),p={center:s,zoom:c,mapTypeId:r.getMapTypeId(),zoomControl:w,scrollwheel:C,fullscreenControl:M,streetViewControl:_,mapTypeControl:S,mapId:digiBlocksData.googleMapsMapId};K.length>0&&(K.forEach(P=>P.map=null),oe([]));let d=new google.maps.Map(L.current,p);pe(d),setTimeout(()=>{V(e,d)},100)}else r&&V(e,r)},me=(e,l,o)=>{let s=[...i];s[e]={...s[e],[l]:o},a({markers:s}),l==="address"&&o&&T.current&&r&&Y(o,r)},_e=e=>{let l=[...i];if(l.splice(e,1),a({markers:l}),l.length===0&&r&&(r.mapId=null,n&&n!=="default"))if(n==="custom"&&u)try{let o=JSON.parse(u);r.setOptions({styles:o})}catch(o){console.error("Invalid map style JSON:",o)}else N[n]&&r.setOptions({styles:N[n]})},Ue=(e,l,o)=>{if(e)if(l&&l!=="default")if(l==="custom"&&o)try{let s=JSON.parse(o);e.setOptions({styles:s})}catch(s){console.error("Invalid map style JSON:",s)}else N[l]&&e.setOptions({styles:N[l]});else e.setOptions({styles:[]})},V=async(e,l)=>{if(!(!e||e.length===0)){K.length>0&&(K.forEach(o=>o.map=null),oe([]));try{google.maps.marker||await google.maps.importLibrary("marker");let o=e.map(s=>{if(!s.latitude||!s.longitude)return null;let c={lat:s.latitude,lng:s.longitude},p=s.title||"",d=s.description||"",P=new google.maps.marker.AdvancedMarkerElement({map:l,position:c,title:p});if(d){let J=document.createElement("div");if(J.className="digiblocks-map-info-content",J.style.cssText="min-width: 200px; max-width: 300px; padding: 10px; background-color: white; border-radius: 8px; box-shadow: 0 2px 7px 1px rgba(0,0,0,0.3);",p){let U=document.createElement("div");U.className="digiblocks-map-info-title",U.style.cssText="font-weight: bold; margin-bottom: 5px; font-size: 16px;",U.textContent=p,J.appendChild(U)}let q=document.createElement("div");q.className="digiblocks-map-info-description",q.style.cssText="font-size: 14px;",q.innerHTML=d,J.appendChild(q);let be=new google.maps.InfoWindow({content:J});google.maps.event.addListener(P,"click",function(){be.open({anchor:P,map:l})}),e.length===1&&be.open({anchor:P,map:l})}return P}).filter(Boolean);oe(o)}catch(o){console.error("Error creating advanced markers:",o)}}},ge=ae(null);j(()=>{if(y&&y!=="none"){let e=setTimeout(()=>{Te(m,y,Z,ge)},100);return()=>clearTimeout(e)}},[y]);let Se=()=>{Te(m,y,Z,ge)},Ne=[{label:t("None","digiblocks"),value:"none"},{label:t("Solid","digiblocks"),value:"solid"},{label:t("Dotted","digiblocks"),value:"dotted"},{label:t("Dashed","digiblocks"),value:"dashed"},{label:t("Double","digiblocks"),value:"double"},{label:t("Groove","digiblocks"),value:"groove"},{label:t("Ridge","digiblocks"),value:"ridge"},{label:t("Inset","digiblocks"),value:"inset"},{label:t("Outset","digiblocks"),value:"outset"}],Be=[{label:t("Roadmap","digiblocks"),value:"roadmap"},{label:t("Satellite","digiblocks"),value:"satellite"},{label:t("Hybrid","digiblocks"),value:"hybrid"},{label:t("Terrain","digiblocks"),value:"terrain"}],Oe=[{label:t("Default","digiblocks"),value:"default"},{label:t("Silver","digiblocks"),value:"silver"},{label:t("Retro","digiblocks"),value:"retro"},{label:t("Dark","digiblocks"),value:"dark"},{label:t("Night","digiblocks"),value:"night"},{label:t("Aubergine","digiblocks"),value:"aubergine"},{label:t("Custom","digiblocks"),value:"custom"}],N={default:[],silver:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],retro:[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{elementType:"labels.text.fill",stylers:[{color:"#523735"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f1e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c9b2a6"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#dcd2be"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#ae9e90"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#93817c"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a5b076"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#447530"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f5f1e6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fdfcf8"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f8c967"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#e9bc62"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#e98d58"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{color:"#db8555"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#806b63"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#8f7d77"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{color:"#ebe3cd"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}],dark:[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}],night:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],aubergine:[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}]},$e=[{label:t("None","digiblocks"),value:"none"},...Object.keys(Z).map(e=>({label:e.replace(/-/g," ").replace(/\b\w/g,l=>l.toUpperCase()),value:e}))],De=[{name:"options",title:t("Options","digiblocks"),icon:se.optionsIcon},{name:"style",title:t("Style","digiblocks"),icon:se.styleIcon},{name:"advanced",title:t("Advanced","digiblocks"),icon:se.advancedIcon}],Ie=()=>{let e=window.digi.responsiveState.activeDevice,l=g&&g[e]?g[e]:e==="desktop"?400:e==="tablet"?350:300,o="";b&&b!=="none"&&(o=`
                border-style: ${b};
                border-color: ${ie||"#e0e0e0"};
				${ke(D,"border-width",e)}
				${ke(I,"border-radius",e)}
            `);let s="";h&&h.enable&&(s=`box-shadow: ${h.position==="inset"?"inset ":""}${h.horizontal}px ${h.vertical}px ${h.blur}px ${h.spread}px ${h.color};`);let c="";x&&x.enable&&(c=`box-shadow: ${x.position==="inset"?"inset ":""}${x.horizontal}px ${x.vertical}px ${x.blur}px ${x.spread}px ${x.color};`);let p="";return y&&y!=="none"&&Z[y]&&(p=Z[y].keyframes),`
            /* Google Map Block - ${m} */
            .${m} {
                height: ${l}px;
                width: 100%;
                overflow: hidden;
                ${o}
                ${s}
				transition: all .3s ease;
            }

            .${m}:hover {
                ${c}
            }
            
            /* Animation keyframes */
            ${p}
            
            /* Responsive styles */
            @media (max-width: 991px) {
                .${m} {
                    height: ${g&&g.tablet?g.tablet:350}px;
                }
            }
            
            @media (max-width: 767px) {
                .${m} {
                    height: ${g&&g.mobile?g.mobile:300}px;
                }
            }

			/* Visibility Controls */
			${f.desktop?`
				@media (min-width: 992px) {
					.${m} {
						opacity: 0.5 !important;
					}
				}
			`:""}

			${f.tablet?`
				@media (min-width: 768px) and (max-width: 991px) {
					.${m} {
						opacity: 0.5 !important;
					}
				}
			`:""}

			${f.mobile?`
				@media (max-width: 767px) {
					.${m} {
						opacity: 0.5 !important;
					}
				}
			`:""}
        `},He=()=>{let e=Array.isArray(i)?i.length:0,l=!!digiBlocksData.googleMapsMapId;return e>0&&!l?wp.element.createElement("div",{className:"components-notice is-warning",style:{margin:"0 0 16px 0"}},wp.element.createElement("div",{className:"components-notice__content"},wp.element.createElement("p",null,t("A Map ID is required to use markers with the Google Maps block.","digiblocks")),wp.element.createElement("p",null,t("Please configure a Map ID in the DigiBlocks settings before adding markers.","digiblocks")),wp.element.createElement(E,{isPrimary:!0,href:`${window.ajaxurl?window.ajaxurl.replace("admin-ajax.php",""):"/wp-admin/"}admin.php?page=digiblocks-settings`,target:"_blank",style:{marginTop:"10px"}},t("Go to Settings","digiblocks")))):wp.element.createElement(wp.element.Fragment,null,Array.isArray(i)&&i.length>0?wp.element.createElement("div",null,i.map((o,s)=>wp.element.createElement("div",{key:o.id||`marker-${s}`,className:"digiblocks-google-map-marker",style:{marginBottom:"16px",padding:"16px",backgroundColor:"#f0f0f0",borderRadius:"4px"}},wp.element.createElement("h3",{style:{margin:"0 0 10px 0"}},t("Marker","digiblocks")," #",s+1),wp.element.createElement(le,{label:t("Title","digiblocks"),value:o.title||"",onChange:c=>me(s,"title",c),placeholder:t("Enter marker title","digiblocks"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),wp.element.createElement(ue,{label:t("Description","digiblocks"),value:o.description||"",onChange:c=>me(s,"description",c),placeholder:t("Enter marker description (will appear above marker)","digiblocks"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),wp.element.createElement(le,{label:t("Address","digiblocks"),value:o.address||"",onChange:c=>{let p=[...i];p[s]={...p[s],address:c},a({markers:p})},onBlur:()=>{i[s]?.address&&T.current&&r&&Y(i[s].address,r,s)},placeholder:t("Enter marker address","digiblocks"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),wp.element.createElement("div",{style:{marginTop:"10px",display:"flex",justifyContent:"flex-end"}},wp.element.createElement(E,{isDestructive:!0,onClick:()=>_e(s)},t("Remove Marker","digiblocks"))))),wp.element.createElement(E,{isPrimary:!0,onClick:ye,style:{marginTop:"10px",width:"100%",justifyContent:"center"}},t("Add Marker","digiblocks"))):wp.element.createElement("div",null,wp.element.createElement("p",null,t("No markers added yet. Add your first marker!","digiblocks")),wp.element.createElement(E,{isPrimary:!0,onClick:ye,style:{width:"100%",justifyContent:"center"}},t("Add Marker","digiblocks"))))},Ge=()=>{switch(de){case"options":return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(v,{tab:"options",name:"map-settings",title:t("Map Settings","digiblocks"),initialOpen:!0},wp.element.createElement(le,{label:t("Address","digiblocks"),value:G||"",onChange:e=>{a({address:e}),e&&T.current&&r&&Y(e,r)},placeholder:t("Enter location address","digiblocks"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),ce&&wp.element.createElement("div",{className:"components-notice is-error",style:{margin:"0 0 16px 0"}},wp.element.createElement("div",{className:"components-notice__content"},ce)),wp.element.createElement(Q,{label:t("Map Type","digiblocks"),value:$,options:Be,onChange:e=>a({mapType:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(!i||i.length===0)&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(Q,{label:t("Map Style","digiblocks"),value:n,options:Oe,onChange:e=>a({mapStyle:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),n==="custom"&&wp.element.createElement(ue,{label:t("Custom Map Style JSON","digiblocks"),help:t("Paste a valid Google Maps style JSON. You can create styles with the Google Maps Styling Wizard.","digiblocks"),value:u||"",onChange:e=>a({customMapStyle:e}),rows:6,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),i&&i.length>0&&wp.element.createElement("div",{className:"components-notice is-info",style:{margin:"0 0 16px 0"}},wp.element.createElement("div",{className:"components-notice__content"},t("Map Style options are not available when markers are present, as markers require a Map ID which overrides custom styling.","digiblocks"))),wp.element.createElement(fe,{label:t("Zoom Level","digiblocks"),value:O,onChange:e=>a({zoom:e}),min:1,max:20,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})),wp.element.createElement(v,{tab:"options",name:"marker-settings",title:t("Markers","digiblocks"),initialOpen:!1},He()),wp.element.createElement(v,{tab:"options",name:"map-controls",title:t("Map Controls","digiblocks"),initialOpen:!1},wp.element.createElement(Ve,{id:`${m}-map-controls`,__nextHasNoMarginBottom:!0},wp.element.createElement(B,{label:t("Enable Zoom Control","digiblocks"),checked:w!==!1,onChange:e=>a({enableZoom:e}),__nextHasNoMarginBottom:!0}),wp.element.createElement(B,{label:t("Enable Mousewheel Zoom","digiblocks"),checked:C!==!1,onChange:e=>a({enableScroll:e}),__nextHasNoMarginBottom:!0}),wp.element.createElement(B,{label:t("Enable Fullscreen Control","digiblocks"),checked:M!==!1,onChange:e=>a({enableFullscreenControl:e}),__nextHasNoMarginBottom:!0}),wp.element.createElement(B,{label:t("Enable Street View Control","digiblocks"),checked:_!==!1,onChange:e=>a({enableStreetViewControl:e}),__nextHasNoMarginBottom:!0}),wp.element.createElement(B,{label:t("Enable Map Type Control","digiblocks"),checked:S!==!1,onChange:e=>a({enableMapTypeControl:e}),__nextHasNoMarginBottom:!0}))));case"style":return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(v,{tab:"style",name:"map-dimensions",title:t("Map Size","digiblocks"),initialOpen:!0},wp.element.createElement(re,{label:t("Map Height","digiblocks")},wp.element.createElement(fe,{value:g&&g[k]?g[k]:k==="desktop"?400:k==="tablet"?350:300,onChange:e=>{a({mapHeight:{...g,[k]:e}})},min:150,max:800,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))),wp.element.createElement(v,{tab:"style",name:"map-border",title:t("Border","digiblocks"),initialOpen:!1},wp.element.createElement(Q,{label:t("Border Style","digiblocks"),value:b||"none",options:Ne,onChange:e=>{e!=="none"&&(b==="none"||!b)&&((!D||Object.keys(D).length===0)&&a({borderWidth:{desktop:{top:1,right:1,bottom:1,left:1,unit:"px"},tablet:{top:1,right:1,bottom:1,left:1,unit:"px"},mobile:{top:1,right:1,bottom:1,left:1,unit:"px"}}}),(!I||Object.keys(I).length===0)&&a({borderRadius:{desktop:{top:0,right:0,bottom:0,left:0,unit:"px"},tablet:{top:0,right:0,bottom:0,left:0,unit:"px"},mobile:{top:0,right:0,bottom:0,left:0,unit:"px"}}})),a({borderStyle:e})},__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),b&&b!=="none"&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(je,{title:t("Border Color","digiblocks"),enableAlpha:!0,colorSettings:[{value:ie,onChange:e=>a({borderColor:e}),label:t("Border Color","digiblocks")}]}),wp.element.createElement(re,{label:t("Border Width","digiblocks")},wp.element.createElement(he,{values:D&&D[k]?D[k]:{top:1,right:1,bottom:1,left:1,unit:"px"},onChange:e=>a({borderWidth:{...D,[k]:e}})})),wp.element.createElement(re,{label:t("Border Radius","digiblocks")},wp.element.createElement(he,{values:I&&I[k]?I[k]:{top:0,right:0,bottom:0,left:0,unit:"px"},onChange:e=>a({borderRadius:{...I,[k]:e}}),units:[{label:"px",value:"px"},{label:"%",value:"%"}]})))),wp.element.createElement(v,{tab:"style",name:"box-shadow",title:t("Box Shadow","digiblocks"),initialOpen:!1},wp.element.createElement(We,{normalValue:h,hoverValue:x,onNormalChange:e=>a({boxShadow:e}),onHoverChange:e=>a({boxShadowHover:e})})));case"advanced":return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(v,{tab:"advanced",name:"animation",title:t("Animation","digiblocks"),initialOpen:!0},wp.element.createElement(Q,{label:t("Animation Effect","digiblocks"),value:y,options:$e,onChange:e=>a({animation:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),y&&y!=="none"&&wp.element.createElement("div",{style:{marginTop:"10px"}},wp.element.createElement(E,{variant:"secondary",isSecondary:!0,onClick:Se,style:{width:"100%"}},t("Preview Animation","digiblocks")))),wp.element.createElement(v,{tab:"advanced",name:"visibility",title:t("Visibility","digiblocks"),initialOpen:!1},wp.element.createElement("div",{className:"components-base-control__help",style:{padding:"12px",backgroundColor:"#f0f6fc",border:"1px solid #c3ddfd",borderRadius:"4px",marginBottom:"16px"}},wp.element.createElement("strong",null,t("Editor Note:","digiblocks")),wp.element.createElement("br",null),t("Hidden elements appear with reduced opacity in the editor for easy editing. Visibility changes only take effect on the frontend.","digiblocks")),wp.element.createElement(B,{label:t("Hide on Desktop","digiblocks"),checked:f.desktop,onChange:e=>a({visibility:{...f,desktop:e}}),__nextHasNoMarginBottom:!0}),wp.element.createElement(B,{label:t("Hide on Tablet","digiblocks"),checked:f.tablet,onChange:e=>a({visibility:{...f,tablet:e}}),__nextHasNoMarginBottom:!0}),wp.element.createElement(B,{label:t("Hide on Mobile","digiblocks"),checked:f.mobile,onChange:e=>a({visibility:{...f,mobile:e}}),__nextHasNoMarginBottom:!0})),wp.element.createElement(v,{tab:"advanced",name:"additional",title:t("Additional","digiblocks"),initialOpen:!1},wp.element.createElement("div",{className:"components-base-control html-anchor-control"},wp.element.createElement("div",{className:"components-base-control__field"},wp.element.createElement("label",{className:"components-base-control__label",htmlFor:"html-anchor"},t("HTML anchor","digiblocks")),wp.element.createElement("input",{className:"components-text-control__input",type:"text",id:"html-anchor",value:A||"",onChange:e=>a({anchor:e.target.value}),"aria-describedby":"html-anchor-help",autoCapitalize:"none",autoComplete:"off"})),wp.element.createElement("p",{id:"html-anchor-help",className:"components-base-control__help"},t(`Enter a word or two \u2014 without spaces \u2014 to make a unique web address just for this block, called an "anchor". Then, you'll be able to link directly to this section of your page.`,"digiblocks")," ",wp.element.createElement("a",{className:"components-external-link",href:"https://wordpress.org/documentation/article/page-jumps/",target:"_blank",rel:"external noreferrer noopener"},wp.element.createElement("span",{className:"components-external-link__contents"},t("Learn more about anchors","digiblocks")),wp.element.createElement("span",{className:"components-external-link__icon","aria-label":"(opens in a new tab)"},"\u2197")))),wp.element.createElement("div",{className:"components-base-control"},wp.element.createElement("div",{className:"components-base-control__field"},wp.element.createElement("label",{className:"components-base-control__label",htmlFor:"additional-css-classes"},t("Additional CSS class(es)","digiblocks")),wp.element.createElement("input",{className:"components-text-control__input",type:"text",id:"additional-css-classes",value:F||"",onChange:e=>a({customClasses:e.target.value}),"aria-describedby":"additional-css-classes-help",autoComplete:"off"})),wp.element.createElement("p",{id:"additional-css-classes-help",className:"components-base-control__help"},t("Separate multiple classes with spaces.","digiblocks")))));default:return null}},ze=Pe({className:`digiblocks-google-map ${m} ${y!=="none"?`animate-${y}`:""} ${F||""}`,id:A||null});return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(Ee,null,wp.element.createElement(Ze,{tabs:De,activeTab:de,onSelect:Me},Ge())),wp.element.createElement("style",{dangerouslySetInnerHTML:{__html:Ie()}}),wp.element.createElement("div",{...ze},digiBlocksData.googleMapsApiKey?Ce?wp.element.createElement("div",{className:"digiblocks-google-map-loading",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},wp.element.createElement(Le,null),wp.element.createElement("span",{style:{marginLeft:"10px"}},t("Loading map...","digiblocks"))):wp.element.createElement("div",{ref:L,className:"digiblocks-google-map-container",style:{width:"100%",height:"100%"}}):wp.element.createElement(Re,{icon:"location-alt",label:t("Google Map","digiblocks"),instructions:t("You need to add your Google Maps API key in the DigiBlocks settings to use this block.","digiblocks")},wp.element.createElement(E,{isPrimary:!0,href:`${window.ajaxurl?window.ajaxurl.replace("admin-ajax.php",""):"/wp-admin/"}admin.php?page=digiblocks-settings`,target:"_blank"},t("Go to Settings","digiblocks")))))},xe=Fe;var{useBlockProps:Ke}=window.wp.blockEditor,Ye=({attributes:R})=>{let{id:a,anchor:W,customClasses:m,mapHeight:A,zoom:f,mapType:F,mapStyle:g,customMapStyle:O,mapId:$,markers:n,address:u,animation:i,enableZoom:G,enableScroll:y,enableFullscreenControl:w,enableStreetViewControl:C,enableMapTypeControl:M}=R,_=["digiblocks-google-map",a,i!=="none"?`animate-${i}`:"",m||""].filter(Boolean).join(" "),S=Ke.save({className:_,id:W||null,"data-map-zoom":f||10,"data-map-type":F||"roadmap","data-map-style":g||"default","data-custom-map-style":O||"","data-map-id":$||"","data-enable-zoom":G!==!1?"true":"false","data-enable-scroll":y!==!1?"true":"false","data-enable-fullscreen":w!==!1?"true":"false","data-enable-streetview":C!==!1?"true":"false","data-enable-maptype":M!==!1?"true":"false"});return wp.element.createElement("div",{...S},wp.element.createElement("div",{className:"digiblocks-google-map-container"}),n&&n.length>0&&wp.element.createElement("div",{className:"digiblocks-google-map-markers",style:{display:"none"}},n.map(b=>wp.element.createElement("div",{key:b.id,className:"digiblocks-google-map-marker","data-lat":b.latitude,"data-lng":b.longitude,"data-title":b.title||"","data-description":b.description||"","data-address":b.address||""}))),u&&wp.element.createElement("div",{className:"digiblocks-google-map-address",style:{display:"none"},"data-address":u}))},ve=Ye;var{__:X}=window.wp.i18n,{registerBlockType:qe}=window.wp.blocks;qe("digiblocks/google-map",{apiVersion:2,title:digiBlocksData.blocks["google-map"].title,category:"digiblocks",icon:{src:()=>{let{viewbox:R,path:a}=digiBlocksData.blocks["google-map"].icon;return wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${R}`,className:"digiblocks-editor-icons"},wp.element.createElement("path",{d:a}))}},description:digiBlocksData.blocks["google-map"].description,keywords:[X("map","digiblocks"),X("google","digiblocks"),X("location","digiblocks"),X("marker","digiblocks")],supports:{html:!1,className:!1,customClassName:!1,anchor:!1},attributes:{id:{type:"string",default:""},anchor:{type:"string",default:""},visibility:{type:"object",default:{desktop:!1,tablet:!1,mobile:!1}},customClasses:{type:"string",default:""},address:{type:"string",default:""},mapHeight:{type:"object",default:{desktop:400,tablet:350,mobile:300}},zoom:{type:"number",default:10},mapType:{type:"string",default:"roadmap"},mapStyle:{type:"string",default:"default"},customMapStyle:{type:"string",default:""},mapId:{type:"string",default:""},markers:{type:"array",default:[]},animation:{type:"string",default:"none"},enableZoom:{type:"boolean",default:!0},enableScroll:{type:"boolean",default:!0},enableFullscreenControl:{type:"boolean",default:!0},enableStreetViewControl:{type:"boolean",default:!0},enableMapTypeControl:{type:"boolean",default:!0},borderStyle:{type:"string",default:"none"},borderWidth:{type:"object",default:{desktop:{top:1,right:1,bottom:1,left:1,unit:"px"},tablet:{top:"",right:"",bottom:"",left:"",unit:"px"},mobile:{top:"",right:"",bottom:"",left:"",unit:"px"}}},borderRadius:{type:"object",default:{desktop:{top:"",right:"",bottom:"",left:"",unit:"px"},tablet:{top:"",right:"",bottom:"",left:"",unit:"px"},mobile:{top:"",right:"",bottom:"",left:"",unit:"px"}}},borderColor:{type:"string",default:"#e0e0e0"},boxShadow:{type:"object",default:{enable:!1,color:"rgba(0, 0, 0, 0.2)",horizontal:0,vertical:0,blur:0,spread:0,position:"outset"}},boxShadowHover:{type:"object",default:{enable:!1,color:"rgba(0, 0, 0, 0.2)",horizontal:0,vertical:0,blur:0,spread:0,position:"outset"}}},example:{attributes:{address:"New York, NY",mapHeight:{desktop:300},zoom:12,mapType:"roadmap"}},edit:xe,save:ve});})();
